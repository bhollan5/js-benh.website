<div class="text-center">
    <script>
        //  Shifting the calendar forward or backward.
        var d = new Date();
        var month_shift = 0;
        var year_shift = 0;

        function shift_calendar(direction) {
            d = new Date();
            month_shift += direction;
            if (d.getMonth() + month_shift >= 12) {
                month_shift = 0 - d.getMonth();
                year_shift++;
            } else if (d.getMonth() + month_shift < 0) {
                month_shift = 11 - d.getMonth();
                year_shift--;
            }
            populate_calendar();
        }

        //  Drawing the calendar
        function populate_calendar() {

            d = new Date();
            var month_num = d.getMonth() + month_shift;
            var year = d.getFullYear() + year_shift;
            d.setMonth(month_num);
            d.setFullYear(year);
            console.log(`Month: ${month_num}`);
            console.log(`Year: ${year}`);

            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            var month_days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            var month = months[month_num];
            document.getElementById('month').innerHTML = month;

            document.getElementById('year').innerHTML = year;

            //  Drawing days
            document.getElementById('days').innerHTML = "";
            var current_day = d.getDate();
            if (month_shift != 0 || year_shift != 0) {
                current_day = -1;
            }
            d.setDate(1);
            var starting_weekday = d.getDay();
            console.log("Starting week day: " + starting_weekday);
            //  Padding the beginning of the month
            for (var i = 0; i < starting_weekday; i++) {
                document.getElementById('days').innerHTML += "<li></li>";
            }
            //  Drawing the month's days.
            var month_day_amt = month_days[month_num];
            for (var i = 1; i <= month_day_amt; i++) {
                if (i == current_day) {
                    document.getElementById('days').innerHTML += `<li id="current-day">${i}</li>`;
                } else {
                    document.getElementById('days').innerHTML += `<li>${i}</li>`;
                }
            }
            //  Padding the end of the month
            d.setDate(month_day_amt);
            var last_weekday = d.getDay();
            for (var i = last_weekday; i < 8; i++) {
                document.getElementById('days').innerHTML += "<li></li>";
            }
        }
        window.addEventListener('load', function () {
            populate_calendar();
            display_entries();
        });

        ////  Timer
        var entries = [];
        var timer_function = null;
        function new_timer() {
            return {
                task: "",
                seconds: 0,
                minutes: 0,
                hours: 0
            }
        }
        var timer = new_timer();
        function start_timer() {
            document.getElementById('play-button').classList.add('hidden');
            document.getElementById('pause-button').classList.remove('hidden');
            timer_function = setInterval(timer_tick, 1000);
        }

        function timer_tick() {
            if (timer.seconds < 60) {
                timer.seconds++;
            } else if (timer.minutes < 60) {
                timer.seconds = 0;
                timer.minutes++;
            } else {
                timer.seconds = 0;
                timer.minutes = 0;
                timer.hours++;
            }
            document.getElementById('current-timer-display').innerHTML = time_to_string(timer);
        }

        //  Returns a nicely displayed string, from a timer object.
        function time_to_string(timer) {
            function two_place_num(num){
                if (num < 10) {
                    return "0" + String(num);
                }
                return num;
            }
            return `${timer.hours}:${two_place_num(timer.minutes)}:${two_place_num(timer.seconds)}`;
        }
        
        //  Stop the timer from recording, add the current entry to the entry list. 
        function stop_timer() {
            document.getElementById('play-button').classList.remove('hidden');
            document.getElementById('pause-button').classList.add('hidden');
            timer.task = document.getElementById('current-task').value;
            clearInterval(timer_function);
            entries.push(timer);
            timer = new_timer();
            display_entries();
        }

        //  Clear & redraw the entries from the work timer. 
        function display_entries() {
            var entry_log = document.getElementById('entries');
            entry_log.innerHTML = "";
            for (var i = 0; i < entries.length; i++) {
                var entry = entries[0];
                var new_entry = '<div class="entry">';
                new_entry += `<span>${entry.task}</span>`;
                new_entry += `<span>${time_to_string(entry)}</span>`;
                new_entry += `</div>`;
                entry_log.innerHTML += new_entry;
            }
        }

    </script>
    <br/><br/>
    <div class="container-center flex space-between">
        <div style="width:48%">

            <!--  Calendar  -->
            <div id="calendar">
                <ul id="month-and-year">
                    <li class="prev" onclick="shift_calendar(-1)">&#10094;</li>
                    <li><span id="month">[Month]</span>, <span id="year">[Year]</span></li>
                    <li class="next" onclick="shift_calendar(1)">&#10095;</li>
                </ul>
                <ul id="weekdays">
                    <li>Mo</li>
                    <li>Tu</li>
                    <li>We</li>
                    <li>Th</li>
                    <li>Fr</li>
                    <li>Sa</li>
                    <li>Su</li>
                </ul>
                <ul id="days">
                </ul>
            </div>

        </div>
        <div style="width:48%">
            <div id="blog">
                <div id="blog-title">Blog</div>
                <div id="blog-link-container">
                    <a href="/wiki">Wiki base</a>
                </div>
            </div>
        </div>
    </div>
    <br /><br />

    <div id="time-tracker">
        <div id="time-tracker-title">
            Time tracker
        </div>
        <div class="day-label">Today -- August 18</div>
        <div class="day-container">
            <div class="current-task">
                <input type="text" placeholder="Task description..." id="current-task"/>
                <div id="current-timer-display">0:00:00</div>
                <img src="/general/play_button.png" id="play-button" onclick="start_timer()">
                <img src="/general/pause_button.png" id="pause-button" class="hidden" onclick="stop_timer()">
            </div>
            <div id="entries">
                <div class="entry">
                    <span>Work on hexaguessimal</span><span>1:30pm-3:00pm</span> <span>2:30:00</span>
                </div>
            </div>
        </div>
    </div>

    <br /><br />
    <div class="divider-line"></div>
    <br /><br /><br /><br /><br /><br /><br /><br />

    <style>
        /*  Calendar:   */
        ul {
            list-style-type: none;
            margin-block-start: 0px;
            margin-block-end: 0px;
            padding-inline-start: 0px;
        }
        #calendar {
            border: solid 1px #466EA8;
            height: 250px;
            width: 100%;
            font-family: sans-serif;
        }
        .prev, .next {
            cursor: pointer;
        }
        .prev:hover, .next:hover {
            filter: brightness(120%);
        }
        #month-and-year {
            width: calc(100% - 20px);
            color: #4698A8;
            border-bottom: solid 1px #466EA8;
            font-size: 12px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-left: 0px;
            padding: 0px 10px 0px 10px;
        }
        #weekdays {
            width: 100%;
            display: flex;
            color: gray;
            justify-content: space-around;
            margin: 10px 0px;
            font-size: 14px;
        }
        #days {
            width: 100%;
            font-size: 14px;
            display: flex;
            justify-content: space-around;
            flex-flow: row wrap;
        }
        #days li {
            width: 13%;
            text-align: center;
            margin-top: 5px;
        }
        #current-day {
            font-weight: bold;
            color: #F87600;
            text-decoration: underline;
        }

        /*  Blog:    */
        #blog {
            border: solid 1px #466EA8;
            height: 250px;
            font-family: sans-serif;
        }
        #blog-title {
            width: 100%;
            color: #4698A8;
            border-bottom: solid 1px #466EA8;
            font-size: 12px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        #blog-link-container {
            padding: 10px;
        }
        #blog-link-container a {
            margin-bottom: 5px;
            
        }

        /*  Time tracker:  */
        #time-tracker {
            border: solid 1px #466EA8;
            height: 250px;
            font-family: sans-serif;
        }
        #time-tracker-title {
            width: 100%;
            color: #4698A8;
            border-bottom: solid 1px #466EA8;
            font-size: 12px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        .day-label {
            width: 100%;
            text-align: center;
            font-size: 10px;
            margin: 3px 0px;
        }
        .day-container {
            border-top: solid 1px #466EA8;
            border-bottom: solid 1px #466EA8;
        }
        .current-task {
            display: flex;
            align-items: center;
            justify-content: space-around;
            height: 50px;
        }
        .current-task input {
            border: none;
            border-bottom: solid 1px black;
            outline: none;
        }
        .current-task div {
            font-size: 12px;
        }
        .current-task img {
            cursor: pointer;
            /* opacity: .5; */
        }
        .hidden {
            display: none;
        }
        .entry {
            display: flex;
            font-size: 12px;
            justify-content: space-around;
            margin-left: 25px;
            margin-right: 100px;
            margin-bottom: 20px;
        }

    </style>

</div>